<!DOCTYPE html>
<html lang="en">


<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Serialize objects to arrays, and vice versa">  
    <link rel="canonical" href="https://docs.zendframework.com/zend-hydrator/v2/strategy/">
    <link rel="shortcut icon" href="../../img/favicon.ico">

    <title>Strategies - zend-hydrator - Zend Framework Docs</title>

    <link rel="stylesheet" href="../../css/styles-5cfabd53ee.css">
</head>
<body id="page-top">

    
    <div class="navbar navbar-default" role="navigation">
    <div class="container">
        <div class="navbar-header">

            
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            
            <span class="navbar-brand">
                <a class="logo-link" href="https://framework.zend.com/" data-tooltip data-placement="bottom" title="Go to the ZF homepage">
                    <img src="../../img/zend-framework-logo.svg" height="28" alt="Zend Framework">
                </a>
            </span>
        </div>

        <div class="navbar-collapse collapse">

            
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="https://framework.zend.com/about">About</a>
                </li>
                <li>
                    <a href="https://framework.zend.com/downloads">Install</a>
                </li>
                <li class="active">
                    <a href="https://docs.zendframework.com">Documentation</a>
                </li>
                <li>
                    <a href="https://www.zend.com/en/services/training">Training</a>
                </li>
                <li>
                    <a href="https://framework.zend.com/blog">Blog</a>
                </li>
                <li>
                    <a href="https://framework.zend.com/participate">Participate</a>
                </li>
            </ul>

            
            
                <div class="nav navbar-nav navbar-collapse visible-xs-block ">
                    
    <div class="subnavigation hidden-print">
        <h4 class="subnavigation__title">
            <a href="../..">zend-hydrator</a>
        </h4>

        <h5 class="subnavigation__subtitle">Table of Contents</h5>

        <ul class="subnavigation__list">
            

                
                

                    
                    
                
            

                
                
                    
                        
    <li class="subnavigation__list-item ">
        <a href="../quick-start/" class="subnavigation__link">Quick Start</a>
    </li>

                    
                        
    <li class="subnavigation__list-item">
        <span class="subnavigation__headline">Reference</span>
        <ul class="subnavigation__list">
            
                
    <li class="subnavigation__list-item ">
        <a href="../filter/" class="subnavigation__link">Filters</a>
    </li>

            
                
    <li class="subnavigation__list-item subnavigation__list-item--active">
        <a href="./" class="subnavigation__link">Strategies</a>
    </li>

            
                
    <li class="subnavigation__list-item ">
        <a href="../aggregate/" class="subnavigation__link">Aggregates</a>
    </li>

            
                
    <li class="subnavigation__list-item">
        <span class="subnavigation__headline">Naming Strategies</span>
        <ul class="subnavigation__list">
            
                
    <li class="subnavigation__list-item ">
        <a href="../naming-strategy/identity-naming-strategy/" class="subnavigation__link">Identity</a>
    </li>

            
                
    <li class="subnavigation__list-item ">
        <a href="../naming-strategy/map-naming-strategy/" class="subnavigation__link">Mapping</a>
    </li>

            
                
    <li class="subnavigation__list-item ">
        <a href="../naming-strategy/underscore-naming-strategy/" class="subnavigation__link">Underscore Mapping</a>
    </li>

            
                
    <li class="subnavigation__list-item ">
        <a href="../naming-strategy/composite-naming-strategy/" class="subnavigation__link">Composite</a>
    </li>

            
        </ul>
    </li>

            
        </ul>
    </li>

                    
                
            
        </ul>
    </div>

                </div>
            

            
            <div class="nav navbar-nav navbar-collapse visible-xs-block">
                <div class="component-selector">
    <h4 class="component-selector__title">Components</h4>
    <h5 class="component-selector__subtitle">Find documentation…</h5>
    <select class="form-control component-selector__control">
        <option value="/">Overview</option>
        <optgroup label="Components"></optgroup>
    </select>
</div>
            </div>
        </div>
    </div>
</div>

    
    <header class="header">
    <div class="container">
        <div class="row">

            
            <div class="col-xs-8">
                <h1 class="header__title">
                    Documentation

                    
                        <small class="header__subtitle">zend-hydrator</small>
                    
                </h1>
            </div>

            
            <div class="col-xs-4 text-right">
                
                    
<div class="version-selector">
    <div class="btn-group">
        <button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            
                v2
            
            <span class="caret"></span>
        </button>
        <ul class="dropdown-menu">
            
                
                    <li class="dropdown-menu__item">
                        <a href="../../v3/quick-start/">
                            
                                v3 (latest)
                            
                        </a>
                    </li>
                
            
                
                    <li class="dropdown-menu__item dropdown-menu__item--selected">
                        <a href="../quick-start/">
                            
                                v2
                            
                        </a>
                    </li>
                
            
        </ul>
    </div>
</div>


                    <a href="#" class="header__link header__link--search" data-toggle="modal" data-target="#mkdocs_search_modal" title="Open search">
                        <i class="fa fa-search"></i> Search
                    </a>
                    <a href="https://github.com/zendframework/zend-hydrator/" class="header__link header__link--github" title="Go to repository of zend-hydrator">
                        <i class="fa fa-github"></i> GitHub
                    </a>
                
            </div>
        </div>
    </div>
</header>

    
    <div class="laminas-announcement">
    <div class="container">
        <div class="row">
            <div class="col-xs-12">
                Zend Framework transitions to the Linux Foundation. <a href="https://getlaminas.org">Learn More.</a>
            </div>
        </div>
    </div>
</div>

    
    <div class="container">
        <div class="row">
            <div class="col-md-9 col-xs-12 content" role="main">
            <!-- content:begin -->
                
                    <ol class="breadcrumb" role="navigation" aria-label="breadcrumbs navigation">
    <li><a href="https://framework.zend.com/">Home</a></li>

    
        <li><a href="https://docs.zendframework.com/">Documentation</a></li>

        
            <li><a href="../..">zend-hydrator</a></li>

            
                
                    
                    
                
            
                
                    
                    
                        <li>Reference</li>
                    
                
            

            <li class="active">Strategies</li>
        
    
</ol>



    <div class="alert alert-danger" role="alert">
        <h4>Caution</h4>
        <p>
            The documentation you are viewing is for an older version of this component.<br>
            <a href="../..">Switch to the latest (v3) version.</a>
        </p>
    </div>




    
    
        <h2 class="chapter__headline">Reference</h2>
    

    <div>
        
    

    
    
        <div class="toc">
            <h6 class="toc__headline">In This Article</h6>
            <ul class="toc__list">
                
                    <li class="toc__entry">
                        <a href="#adding-strategies-to-the-hydrators" class="toc__link">Adding strategies to the hydrators</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#available-implementations" class="toc__link">Available implementations</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#writing-custom-strategies" class="toc__link">Writing custom strategies</a>
                    </li>
                
            </ul>
        </div>
    

    </div>

    <h1 id="zend92hydrator92strategy">Zend\Hydrator\Strategy</h1>
<p>You can add <code>Zend\Hydrator\Strategy\StrategyInterface</code> to any of the hydrators
(except if it extends <code>Zend\Hydrator\AbstractHydrator</code> or implements
<code>Zend\Hydrator\HydratorInterface</code> and <code>Zend\Hydrator\Strategy\StrategyEnabledInterface</code>)
to manipulate the way how they behave on <code>extract()</code> and <code>hydrate()</code> for
specific key / value pairs. This is the interface that needs to be implemented:</p>
<pre class="codehilite"><code class="language-php">namespace Zend\Hydrator\Strategy;

interface StrategyInterface
{
     /**
      * Converts the given value so that it can be extracted by the hydrator.
      *
      * @param mixed $value The original value.
      * @return mixed Returns the value that should be extracted.
      */
     public function extract($value);

     /**
      * Converts the given value so that it can be hydrated by the hydrator.
      *
      * @param mixed $value The original value.
      * @return mixed Returns the value that should be hydrated.
      */
     public function hydrate($value);
}</code></pre>

<p>This interface is similar to <code>Zend\Hydrator\HydratorInterface</code>; the reason
is that strategies provide a proxy implementation for <code>hydrate()</code> and <code>extract()</code>.</p>
<h2 id="adding-strategies-to-the-hydrators">Adding strategies to the hydrators</h2>
<p>To allow strategies within your hydrator, <code>Zend\Hydrator\Strategy\StrategyEnabledInterface</code>
provides the following methods:</p>
<pre class="codehilite"><code class="language-php">namespace Zend\Hydrator;

use Zend\Hydrator\Strategy\StrategyInterface;

interface StrategyEnabledInterface
{
    /**
     * Adds the given strategy under the given name.
     *
     * @param string $name The name of the strategy to register.
     * @param StrategyInterface $strategy The strategy to register.
     * @return HydratorInterface
     */
    public function addStrategy($name, StrategyInterface $strategy);

    /**
     * Gets the strategy with the given name.
     *
     * @param string $name The name of the strategy to get.
     * @return StrategyInterface
     */
    public function getStrategy($name);

    /**
     * Checks if the strategy with the given name exists.
     *
     * @param string $name The name of the strategy to check for.
     * @return bool
     */
    public function hasStrategy($name);

    /**
     * Removes the strategy with the given name.
     *
     * @param string $name The name of the strategy to remove.
     * @return HydratorInterface
     */
    public function removeStrategy($name);
}</code></pre>

<p>Every hydrator shipped by default provides this functionality;
<code>AbstractHydrator</code> fully implements it as well. As such, if you want to use this
functionality in your own hydrators, you should extend <code>AbstractHydrator</code>.</p>
<h2 id="available-implementations">Available implementations</h2>
<h3 id="zend92hydrator92strategy92booleanstrategy">Zend\Hydrator\Strategy\BooleanStrategy</h3>
<p>This strategy converts values into Booleans and vice versa. It expects two
arguments at the constructor, which are used to define value maps for <code>true</code> and
<code>false</code>.</p>
<h3 id="zend92hydrator92strategy92closurestrategy">Zend\Hydrator\Strategy\ClosureStrategy</h3>
<p>This is a strategy that allows you to pass in options for:</p>
<ul>
<li><code>hydrate</code>, a callback to be called when hydrating a value, and</li>
<li><code>extract</code>, a callback to be called when extracting a value.</li>
</ul>
<h3 id="zend92hydrator92strategy92datetimeformatterstrategy">Zend\Hydrator\Strategy\DateTimeFormatterStrategy</h3>
<p><code>DateTimeFormatterStrategy</code> provides bidirectional conversion between strings
and DateTime instances. The input and output formats can be provided as
constructor arguments.</p>
<p>As of version 2.4.1, this strategy now allows <code>DateTime</code> formats that use <code>!</code> to
prepend the format, or <code>|</code> or <code>+</code> to append it; these ensure that, during
hydration, the new <code>DateTime</code> instance created will set the time element
accordingly. As a specific example, <code>Y-m-d|</code> will drop the time component,
ensuring comparisons are based on a midnight time value.</p>
<h3 id="zend92hydrator92strategy92defaultstrategy">Zend\Hydrator\Strategy\DefaultStrategy</h3>
<p>The <code>DefaultStrategy</code> simply proxies everything through, without performing any
conversion of values.</p>
<h3 id="zend92hydrator92strategy92explodestrategy">Zend\Hydrator\Strategy\ExplodeStrategy</h3>
<p>This strategy is a wrapper around PHP's <code>implode()</code> and <code>explode()</code> functions.
The delimiter and a limit can be provided to the constructor; the limit will
only be used for <code>extract</code> operations.</p>
<h3 id="zend92hydrator92strategy92serializablestrategy">Zend\Hydrator\Strategy\SerializableStrategy</h3>
<p><code>SerializableStrategy</code> provides the functionality backing
<code>Zend\Hydrator\ArraySerializable</code>. You can use it with custom implementations
for <code>Zend\Serializer\Adapter\AdapterInterface</code> if you want to as well.</p>
<h3 id="zend92hydrator92strategy92strategychain">Zend\Hydrator\Strategy\StrategyChain</h3>
<p>This strategy takes an array of <code>StrategyInterface</code> instances and iterates
over them when performing <code>extract()</code> and <code>hydrate()</code> operations. Each operates
on the return value of the previous, allowing complex operations based on
smaller, single-purpose strategies.</p>
<h2 id="writing-custom-strategies">Writing custom strategies</h2>
<p>The following example, while not terribly useful, will provide you with the
basics for writing your own strategies, as well as provide ideas as to where and
when to use them. This strategy simply transforms the value for the defined key
using <code>str_rot13()</code> during both the <code>extract()</code> and <code>hydrate()</code> operations:</p>
<pre class="codehilite"><code class="language-php">class Rot13Strategy implements StrategyInterface
{
    public function extract($value)
    {
        return str_rot13($value);
    }

    public function hydrate($value)
    {
        return str_rot13($value);
    }
}</code></pre>

<p>This is the example class with which we want to use the hydrator example:</p>
<pre class="codehilite"><code class="language-php">class Foo
{
    protected $foo = null;
    protected $bar = null;

    public function getFoo()
    {
        return $this-&gt;foo;
    }

    public function setFoo($foo)
    {
        $this-&gt;foo = $foo;
    }

    public function getBar()
    {
        return $this-&gt;bar;
    }

    public function setBar($bar)
    {
        $this-&gt;bar = $bar;
    }
}</code></pre>

<p>Now, we'll add the <code>rot13</code> strategy to the method <code>getFoo()</code> and <code>setFoo($foo)</code>:</p>
<pre class="codehilite"><code class="language-php">$foo = new Foo();
$foo-&gt;setFoo('bar');
$foo-&gt;setBar('foo');

$hydrator = new ClassMethods();
$hydrator-&gt;addStrategy('foo', new Rot13Strategy());</code></pre>

<p>When you use the hydrator to extract an array for the object <code>$foo</code>, you'll
receive the following:</p>
<pre class="codehilite"><code class="language-php">$extractedArray = $hydrator-&gt;extract($foo);

// array(2) {
//     ["foo"]=&gt;
//     string(3) "one"
//     ["bar"]=&gt;
//     string(3) "foo"
// }</code></pre>

<p>And when hydrating a new <code>Foo</code> instance:</p>
<pre class="codehilite"><code class="language-php">$hydrator-&gt;hydrate($extractedArray, $foo)

// object(Foo)#2 (2) {
//   ["foo":protected]=&gt;
//   string(3) "bar"
//   ["bar":protected]=&gt;
//   string(3) "foo"
// }</code></pre>




    <nav>
    <ul class="page-nav hidden-print">

        
        <li class="page-nav__item">
            
                <a rel="prev" class="page-nav__link page-nav__link--prev" href="../filter/">
                    <i class="fa fa-chevron-left"></i> Previous
                </a>
            
        </li>

        
        <li class="page-nav__item">
            
                <a rel="next" class="page-nav__link page-nav__link--next" href="../aggregate/">
                    Next <i class="fa fa-chevron-right"></i>
                </a>
            
        </li>
    </ul>
</nav>




    <div class="help-wanted">
        <p>
            Found a mistake or want to contribute to the documentation?
            <a href="https://github.com/zendframework/zend-hydrator/edit/master/docs/v2/strategy.md" target="_blank" class="help-wanted__link">
                Edit this page on GitHub!
            </a>
        </p>
    </div>

                
            <!-- content:end -->
            </div>
            <div class="col-md-3 col-xs-12 sidebar">
                
                    <div class="component-selector">
    <h4 class="component-selector__title">Components</h4>
    <h5 class="component-selector__subtitle">Find documentation…</h5>
    <select class="form-control component-selector__control">
        <option value="/">Overview</option>
        <optgroup label="Components"></optgroup>
    </select>
</div>
                    
    <div class="subnavigation hidden-print">
        <h4 class="subnavigation__title">
            <a href="../..">zend-hydrator</a>
        </h4>

        <h5 class="subnavigation__subtitle">Table of Contents</h5>

        <ul class="subnavigation__list">
            

                
                

                    
                    
                
            

                
                
                    
                        
    <li class="subnavigation__list-item ">
        <a href="../quick-start/" class="subnavigation__link">Quick Start</a>
    </li>

                    
                        
    <li class="subnavigation__list-item">
        <span class="subnavigation__headline">Reference</span>
        <ul class="subnavigation__list">
            
                
    <li class="subnavigation__list-item ">
        <a href="../filter/" class="subnavigation__link">Filters</a>
    </li>

            
                
    <li class="subnavigation__list-item subnavigation__list-item--active">
        <a href="./" class="subnavigation__link">Strategies</a>
    </li>

            
                
    <li class="subnavigation__list-item ">
        <a href="../aggregate/" class="subnavigation__link">Aggregates</a>
    </li>

            
                
    <li class="subnavigation__list-item">
        <span class="subnavigation__headline">Naming Strategies</span>
        <ul class="subnavigation__list">
            
                
    <li class="subnavigation__list-item ">
        <a href="../naming-strategy/identity-naming-strategy/" class="subnavigation__link">Identity</a>
    </li>

            
                
    <li class="subnavigation__list-item ">
        <a href="../naming-strategy/map-naming-strategy/" class="subnavigation__link">Mapping</a>
    </li>

            
                
    <li class="subnavigation__list-item ">
        <a href="../naming-strategy/underscore-naming-strategy/" class="subnavigation__link">Underscore Mapping</a>
    </li>

            
                
    <li class="subnavigation__list-item ">
        <a href="../naming-strategy/composite-naming-strategy/" class="subnavigation__link">Composite</a>
    </li>

            
        </ul>
    </li>

            
        </ul>
    </li>

                    
                
            
        </ul>
    </div>

                
            </div>
        </div>
    </div>

    
    <footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-9">
                <h5>Zend Framework</h5>
                <ul>
                    <li><a href="https://framework.zend.com/">framework.zend.com</a></li>
                    <li><a href="https://docs.zendframework.com">docs.zendframework.com</a></li>
                    <li><a href="https://packages.zendframework.com">packages.zendframework.com</a></li>
                    <li><a href="https://apigility.org">apigility.org</a></li>
                    <li><a href="https://getexpressive.org/">getexpressive.org</a></li>
                </ul>
            </div>
        </div>

        
        <div class="row">
            <div class="col-md-12 text-center">
                <a class="footer__button" href="#page-top"><i class="fa fa-chevron-up" aria-hidden="true"></i></a>
            </div>
        </div>

        <div class="row">

            
            <div class="col-md-9">
                <h4 class="footer__headline">Copyright</h4>
                <p>&copy; 2006-2019 by <a href="https://www.zend.com/">Zend</a>, a <a href="https://www.roguewave.com/">Rogue Wave Company</a>.</p>
            </div>

            
            <div class="col-md-3">
                <h4 class="footer__headline">Support</h4>
                <ul class="support__list">
                    <li class="support__list-item">
                        <a href="https://discourse.zendframework.com" class="support__link" title="Forum"><i class="fa fa-comments"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://zendframework-slack.herokuapp.com" class="support__link" title="Chat"><i class="fa fa-slack"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://github.com/zendframework" class="support__link" title="Github"><i class="fa fa-github"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://twitter.com/zfdevteam" class="support__link" title="Twitter"><i class="fa fa-twitter"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://tinyletter.com/mwopzend" class="support__link" title="Newsletter"><i class="fa fa-envelope"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://framework.zend.com/blog/feed-rss.xml" class="support__link" title="Blog feed"><i class="fa fa-rss"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://framework.zend.com/security/feed" class="support__link" title="Security feed"><i class="fa fa-rss-square"></i></a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</footer>

    <script>
        var base_url = '../..',
            siteName = 'zend-hydrator';
    </script>
    <script src="../../js/scripts-8d7ae56abf.js"></script>
        <script src="../../search/main.js"></script>

    
    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">Close</span>
                    </button>
                    <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                </div>
                <div class="modal-body">
                    <p>
                        From here you can search these documents. Enter your search terms below.
                    </p>
                    <form role="form">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                        </div>
                    </form>
                    <div id="mkdocs-search-results"></div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>



</body>


</html>
